{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { Component, createElement } from \"react\";\n\nconst DEFAULT_CHART_COLORS = [\n  \"#3366CC\",\n  \"#DC3912\",\n  \"#FF9900\",\n  \"#109618\",\n  \"#990099\",\n  \"#3B3EAC\",\n  \"#0099C6\",\n  \"#DD4477\",\n  \"#66AA00\",\n  \"#B82E2E\",\n  \"#316395\",\n  \"#994499\",\n  \"#22AA99\",\n  \"#AAAA11\",\n  \"#6633CC\",\n  \"#E67300\",\n  \"#8B0707\",\n  \"#329262\",\n  \"#5574A6\",\n  \"#3B3EAC\"\n];\n\nvar DEFAULT_COLORS = /*#__PURE__*/ Object.freeze({\n  DEFAULT_CHART_COLORS: DEFAULT_CHART_COLORS,\n  default: DEFAULT_CHART_COLORS\n});\n\nconst getGoogle = (windowAsArg = window) => {\n  if (typeof windowAsArg === \"undefined\") {\n    return {};\n  }\n  if (typeof windowAsArg.google === \"undefined\") {\n    throw new Error(\"google not in window object. Error in get-google-charts.\");\n  }\n  return windowAsArg.google;\n};\nconst getGoogleCharts = (windowAsArg = window) => {\n  if (typeof windowAsArg === \"undefined\") {\n    return {};\n  }\n  if (typeof windowAsArg.google === \"undefined\") {\n    throw new Error(\"google not in window object. Error in get-google-charts.\");\n  }\n  return windowAsArg.google.charts;\n};\n\nclass GoogleChartLoader {\n  constructor() {\n    this.isLoaded = false;\n    this.isLoading = false;\n    this.loadScript = null;\n    this.destroy = () => {\n      this.isLoading = false;\n      this.isLoaded = false;\n      this.loadScript = null;\n    };\n    this.init = (packages, version, language, mapsApiKey) => {\n      if ((this.isLoading || this.isLoaded) && this.loadScript !== null) {\n        return this.loadScript;\n      }\n      this.isLoading = true;\n      const script =\n        typeof window !== \"undefined\"\n          ? require(\"loadjs\")\n          : (link, { success: callback }) => callback();\n      this.loadScript = new Promise(resolve => {\n        script(\"https://www.gstatic.com/charts/loader.js\", {\n          success: () => {\n            const google_charts = getGoogleCharts(window);\n            google_charts.load(version || \"current\", {\n              packages: packages || [\"corechart\"],\n              language: language || \"en\",\n              mapsApiKey\n            });\n            google_charts.setOnLoadCallback(() => {\n              this.isLoaded = true;\n              this.isLoading = false;\n              resolve();\n            });\n          }\n        });\n      });\n      this.isLoading = true;\n      return this.loadScript;\n    };\n  }\n}\nconst googleChartLoader = new GoogleChartLoader();\n\nlet uniqueID = 0;\nconst generateUniqueID = () => {\n  uniqueID += 1;\n  return `reactgooglegraph-${uniqueID}`;\n};\nclass Chart extends Component {\n  constructor(props) {\n    super(props);\n    this.chart = null;\n    this.wrapper = null;\n    this.hidden_columns = {};\n    this.dataTable = [];\n    this.isUnmounted = false;\n    this.onResize = () => {\n      this.drawChart();\n    };\n    this.onSelectToggle = () => {\n      if (this.chart === null) return;\n      if (!this.props.legend_toggle) {\n        return;\n      }\n      const selection = this.chart.getSelection();\n      if (selection.length > 0) {\n        if (selection[0].row == null) {\n          const column = selection[0].column;\n          this.togglePoints(column);\n        }\n      }\n    };\n    this.getColumnColor = columnIndex => {\n      if (this.props.options && this.props.options.colors) {\n        if (this.props.options.colors[columnIndex]) {\n          return this.props.options.colors[columnIndex];\n        }\n      } else if (columnIndex in DEFAULT_COLORS) {\n        return DEFAULT_COLORS[columnIndex];\n      }\n      return DEFAULT_COLORS[0];\n    };\n    this.applyNumberFormat = (column, options) => {\n      const googlefromWindow = getGoogle(window);\n      const formatter = new googlefromWindow.visualization.NumberFormat(\n        options\n      );\n      formatter.format(this.dataTable, column);\n    };\n    this.applyDateFormat = (column, options) => {\n      const googlefromWindow = getGoogle(window);\n      const formatter = new googlefromWindow.visualization.DateFormat(options);\n      formatter.format(this.dataTable, column);\n    };\n    this.buildDataTableFromProps = () => {\n      const chartType = this.props.chartType;\n      const googlefromWindow = getGoogle(window);\n      if (this.props.diffdata && this.props.chartType !== null) {\n        const diffdata = this.props.diffdata;\n        const oldData = googlefromWindow.visualization.arrayToDataTable(\n          diffdata.old\n        );\n        const newData = googlefromWindow.visualization.arrayToDataTable(\n          diffdata.new\n        );\n        const computeDiff =\n          googlefromWindow.visualization[chartType].prototype.computeDiff;\n        const chartDiff = computeDiff(oldData, newData);\n        return chartDiff;\n      }\n      if (\n        this.props.data === null &&\n        (this.props.rows && this.props.rows.length === 0) &&\n        !this.props.allowEmptyRows === false\n      ) {\n        throw new Error(\n          \"Can't build DataTable from rows and columns: rows array in props is empty\"\n        );\n      } else if (\n        this.props.data === null &&\n        (this.props.columns && this.props.columns.length === 0)\n      ) {\n        throw new Error(\n          \"Can't build DataTable from rows and columns: columns array in props is empty\"\n        );\n      }\n      if (this.props.data !== null) {\n        try {\n          this.wrapper.setDataTable(this.props.data);\n          const dataTable = this.wrapper.getDataTable();\n          return dataTable;\n        } catch (err) {\n          throw new Error(\"Failed to set DataTable from data props ! \", err);\n        }\n      }\n      const dataTable = new window.google.visualization.DataTable();\n      this.props.columns.forEach(column => {\n        dataTable.addColumn(column);\n      });\n      dataTable.addRows(this.props.rows);\n      if (this.props.numberFormat) {\n        const { column, options } = this.props.numberFormat;\n        this.applyNumberFormat(column, options);\n      }\n      if (this.props.dateFormat) {\n        const { columns, options } = this.props.dateFormat;\n        columns.forEach(col => {\n          this.applyDateFormat(col, options);\n        });\n      }\n      this.props.formatters.forEach(({ type, column, options }) => {\n        switch (type) {\n          case \"NumberFormat\":\n            this.applyNumberFormat(column, options);\n            break;\n          case \"DateFormat\":\n            this.applyDateFormat(column, options);\n            break;\n          default:\n            console.log(`Unkown formatter type: ${type}`);\n            break;\n        }\n      });\n      return dataTable;\n    };\n    this.updateDataTable = () => {\n      window.google.visualization.errors.removeAll(\n        document.getElementById(this.wrapper.getContainerId())\n      );\n      this.dataTable.removeRows(0, this.dataTable.getNumberOfRows());\n      this.dataTable.removeColumns(0, this.dataTable.getNumberOfColumns());\n      this.dataTable = this.buildDataTableFromProps();\n      return this.dataTable;\n    };\n    this.drawChart = () => {\n      if (this.isUnmounted) {\n        return;\n      }\n      if (!this.wrapper) {\n        const chartConfig = {\n          chartType: this.props.chartType,\n          options: this.props.options,\n          containerId: this.state.graphID\n        };\n        this.wrapper = new window.google.visualization.ChartWrapper(\n          chartConfig\n        );\n        this.dataTable = this.buildDataTableFromProps();\n        this.wrapper.setDataTable(this.dataTable);\n        window.google.visualization.events.addOneTimeListener(\n          this.wrapper,\n          \"ready\",\n          () => {\n            this.chart = this.wrapper.getChart();\n            this.listenToChartEvents();\n            this.addChartActions();\n          }\n        );\n      } else {\n        this.updateDataTable();\n        this.wrapper.setDataTable(this.dataTable);\n        this.wrapper.setOptions(this.props.options);\n        if (this.wrapper.getChartType() !== this.props.chartType) {\n          window.google.visualization.events.removeAllListeners(this.wrapper);\n          this.wrapper.setChartType(this.props.chartType);\n          const self = this;\n          window.google.visualization.events.addOneTimeListener(\n            this.wrapper,\n            \"ready\",\n            () => {\n              self.chart = self.wrapper.getChart();\n              self.listenToChartEvents.call(self);\n            }\n          );\n        }\n      }\n      this.wrapper.draw();\n    };\n    this.addChartActions = () => {\n      if (this.props.chartActions === null) {\n        return;\n      }\n      this.props.chartActions.forEach(chartAction => {\n        this.chart.setAction({\n          id: chartAction.id,\n          text: chartAction.text,\n          action: chartAction.action.bind(this, this.chart)\n        });\n      });\n    };\n    this.listenToChartEvents = () => {\n      if (this.props.legend_toggle) {\n        window.google.visualization.events.addListener(\n          this.wrapper,\n          \"select\",\n          this.onSelectToggle\n        );\n      }\n      this.props.chartEvents.forEach(chartEvent => {\n        if (chartEvent.eventName === \"ready\") {\n          chartEvent.callback(this);\n        } else {\n          (event => {\n            window.google.visualization.events.addListener(\n              this.chart,\n              event.eventName,\n              e => {\n                event.callback(this, e);\n              }\n            );\n          })(chartEvent);\n        }\n      });\n    };\n    this.buildColumnFromSourceData = columnIndex => {\n      return {\n        label: this.dataTable.getColumnLabel(columnIndex),\n        type: this.dataTable.getColumnType(columnIndex),\n        sourceColumn: columnIndex,\n        role: this.dataTable.getColumnRole(columnIndex)\n      };\n    };\n    this.buildEmptyColumnFromSourceData = columnIndex => {\n      return {\n        label: this.dataTable.getColumnLabel(columnIndex),\n        type: this.dataTable.getColumnType(columnIndex),\n        calc: () => null,\n        role: this.dataTable.getColumnRole(columnIndex)\n      };\n    };\n    this.addEmptyColumnTo = (columns, columnIndex) => {\n      const emptyColumn = this.buildEmptyColumnFromSourceData(columnIndex);\n      columns.push(emptyColumn);\n    };\n    this.hideColumn = (colors, columnIndex) => {\n      if (!this.isHidden(columnIndex)) {\n        this.hidden_columns[columnIndex] = {\n          color: this.getColumnColor(columnIndex - 1)\n        };\n      }\n      colors.push(\"#CCCCCC\");\n    };\n    this.addSourceColumnTo = (columns, columnIndex) => {\n      const sourceColumn = this.buildColumnFromSourceData(columnIndex);\n      columns.push(sourceColumn);\n    };\n    this.isHidden = columnIndex => {\n      return this.hidden_columns[columnIndex] !== undefined;\n    };\n    this.restoreColorTo = (colors, columnIndex) => {\n      let previousColor;\n      if (this.isHidden(columnIndex)) {\n        previousColor = this.hidden_columns[columnIndex].color;\n        delete this.hidden_columns[columnIndex];\n      } else {\n        previousColor = this.getColumnColor(columnIndex - 1);\n      }\n      if (columnIndex !== 0) {\n        colors.push(previousColor);\n      }\n    };\n    this.debounce = (func, wait) => {\n      let timeout;\n      return function(...args) {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(context, args), wait);\n      };\n    };\n    this.togglePoints = column => {\n      const view = new window.google.visualization.DataView(\n        this.wrapper.getDataTable()\n      );\n      const columnCount = view.getNumberOfColumns();\n      let colors = [];\n      let columns = [];\n      for (let i = 0; i < columnCount; i += 1) {\n        if (i === 0) {\n          this.addSourceColumnTo(columns, i);\n        } else if (i === column) {\n          if (this.isHidden(i)) {\n            this.addSourceColumnTo(columns, i);\n            this.restoreColorTo(colors, i);\n          } else {\n            this.addEmptyColumnTo(columns, i);\n            this.hideColumn(colors, i);\n          }\n        } else if (this.isHidden(i)) {\n          this.addEmptyColumnTo(columns, i);\n          this.hideColumn(colors, i);\n        } else {\n          this.addSourceColumnTo(columns, i);\n          this.restoreColorTo(colors, i);\n        }\n      }\n      view.setColumns(columns);\n      this.props.options.colors = colors;\n      this.chart.draw(view, this.props.options);\n    };\n    this.state = { graphID: props.graph_id || generateUniqueID() };\n  }\n  componentDidMount() {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    if (this.props.loadCharts) {\n      googleChartLoader\n        .init(\n          this.props.chartPackages,\n          this.props.chartVersion,\n          this.props.chartLanguage,\n          this.props.mapsApiKey\n        )\n        .then(() => {\n          this.drawChart();\n          this.onResize = this.debounce(this.onResize, 200);\n          window.addEventListener(\"resize\", this.onResize);\n        });\n    } else {\n      this.drawChart();\n    }\n  }\n  componentDidUpdate() {\n    if (!this.props.loadCharts) {\n      this.drawChart();\n    } else if (googleChartLoader.isLoading) {\n      googleChartLoader.loadScript &&\n        googleChartLoader.loadScript.then(() => {\n          this.drawChart();\n        });\n    } else if (googleChartLoader.isLoaded) {\n      this.drawChart();\n    }\n  }\n  componentWillUnmount() {\n    this.isUnmounted = true;\n    googleChartLoader.destroy();\n    try {\n      if (window) {\n        if (window.google && window.google.visualization) {\n          window.google.visualization.events.removeAllListeners(this.wrapper);\n        }\n        window.removeEventListener(\"resize\", this.onResize);\n      }\n    } catch (err) {\n      return;\n    }\n  }\n  render() {\n    const divStyle = {\n      height: this.props.height || this.props.options.height,\n      width: this.props.width || this.props.options.width\n    };\n    return createElement(\n      \"div\",\n      { id: this.state.graphID, style: divStyle },\n      this.props.loader ? this.props.loader : \"Rendering Chart...\"\n    );\n  }\n}\nChart.defaultProps = {\n  chartType: \"LineChart\",\n  rows: [],\n  columns: [],\n  options: {\n    chart: {\n      title: \"Chart Title\",\n      subtitle: \"Subtitle\"\n    },\n    hAxis: { title: \"X Label\" },\n    vAxis: { title: \"Y Label\" },\n    width: \"100%\",\n    height: \"100%\"\n  },\n  width: \"400px\",\n  height: \"300px\",\n  chartEvents: [],\n  chartActions: null,\n  data: null,\n  legend_toggle: false,\n  allowEmptyRows: false,\n  loadCharts: true,\n  loader: createElement(\"div\", null, \"Rendering Chart\"),\n  chartPackages: [\"corechart\"],\n  chartVersion: \"current\",\n  chartLanguage: \"en\",\n  numberFormat: null,\n  dateFormat: null,\n  formatters: [],\n  diffdata: null\n};\n\nvar index = { Chart };\n\nexport default index;\nexport { Chart };\n"],"names":["DEFAULT_CHART_COLORS","DEFAULT_COLORS","Object","freeze","default","getGoogle","windowAsArg","window","google","Error","googleChartLoader","isLoaded","isLoading","loadScript","destroy","init","packages","version","language","mapsApiKey","this","script","require","link","ref","callback","Promise","resolve","google_charts","charts","getGoogleCharts","load","setOnLoadCallback","uniqueID","generateUniqueID","Chart","props","super","chart","wrapper","hidden_columns","dataTable","isUnmounted","onResize","drawChart","onSelectToggle","legend_toggle","const","selection","getSelection","length","row","togglePoints","column","getColumnColor","columnIndex","options","colors","applyNumberFormat","visualization","NumberFormat","format","applyDateFormat","DateFormat","buildDataTableFromProps","chartType","googlefromWindow","diffdata","oldData","arrayToDataTable","old","newData","new","computeDiff","prototype","data","rows","allowEmptyRows","columns","setDataTable","getDataTable","err","DataTable","forEach","addColumn","addRows","numberFormat","dateFormat","col","formatters","type","console","log","updateDataTable","errors","removeAll","document","getElementById","getContainerId","removeRows","getNumberOfRows","removeColumns","getNumberOfColumns","setOptions","getChartType","events","removeAllListeners","setChartType","self","addOneTimeListener","getChart","listenToChartEvents","call","ChartWrapper","containerId","state","graphID","addChartActions","draw","chartActions","chartAction","setAction","id","text","action","bind","addListener","chartEvents","chartEvent","event","eventName","e","buildColumnFromSourceData","label","getColumnLabel","getColumnType","sourceColumn","role","getColumnRole","buildEmptyColumnFromSourceData","calc","addEmptyColumnTo","emptyColumn","push","hideColumn","isHidden","color","addSourceColumnTo","undefined","restoreColorTo","let","previousColor","debounce","func","wait","timeout","context","clearTimeout","setTimeout","apply","args","view","DataView","columnCount","i","setColumns","graph_id","componentDidMount","loadCharts","chartPackages","chartVersion","chartLanguage","then","addEventListener","componentDidUpdate","componentWillUnmount","removeEventListener","render","createElement","style","height","width","loader","Component","defaultProps","title","subtitle","hAxis","vAxis"],"mappings":"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"}