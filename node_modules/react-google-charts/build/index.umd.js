!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("react")):"function"==typeof define&&define.amd?define(["react"],o):t.reactGoogleCharts=o(t.react)}(this,function(t){var o=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],e=Object.freeze({DEFAULT_CHART_COLORS:o,default:o}),r=function(t){if(void 0===t&&(t=window),void 0===t)return{};if(void 0===t.google)throw new Error("google not in window object. Error in get-google-charts.");return t.google},a=new function(){var t=this;this.isLoaded=!1,this.isLoading=!1,this.loadScript=null,this.destroy=function(){t.isLoading=!1,t.isLoaded=!1,t.loadScript=null},this.init=function(o,e,r,a){if((t.isLoading||t.isLoaded)&&null!==t.loadScript)return t.loadScript;t.isLoading=!0;var n="undefined"!=typeof window?require("loadjs"):function(t,o){return(0,o.success)()};return t.loadScript=new Promise(function(i){n("https://www.gstatic.com/charts/loader.js",{success:function(){var n=function(t){if(void 0===t&&(t=window),void 0===t)return{};if(void 0===t.google)throw new Error("google not in window object. Error in get-google-charts.");return t.google.charts}(window);n.load(e||"current",{packages:o||["corechart"],language:r||"en",mapsApiKey:a}),n.setOnLoadCallback(function(){t.isLoaded=!0,t.isLoading=!1,i()})}})}),t.isLoading=!0,t.loadScript}},n=0,i=function(){return"reactgooglegraph-"+(n+=1)},s=function(o){function n(t){var a=this;o.call(this,t),this.chart=null,this.wrapper=null,this.hidden_columns={},this.dataTable=[],this.isUnmounted=!1,this.onResize=function(){a.drawChart()},this.onSelectToggle=function(){if(null!==a.chart&&a.props.legend_toggle){var t=a.chart.getSelection();if(t.length>0)if(null==t[0].row)a.togglePoints(t[0].column)}},this.getColumnColor=function(t){if(a.props.options&&a.props.options.colors){if(a.props.options.colors[t])return a.props.options.colors[t]}else if(t in e)return e[t];return e[0]},this.applyNumberFormat=function(t,o){new(r(window).visualization.NumberFormat)(o).format(a.dataTable,t)},this.applyDateFormat=function(t,o){new(r(window).visualization.DateFormat)(o).format(a.dataTable,t)},this.buildDataTableFromProps=function(){var t=a.props.chartType,o=r(window);if(a.props.diffdata&&null!==a.props.chartType){var e=a.props.diffdata,n=o.visualization.arrayToDataTable(e.old),i=o.visualization.arrayToDataTable(e.new);return(0,o.visualization[t].prototype.computeDiff)(n,i)}if(null===a.props.data&&a.props.rows&&0===a.props.rows.length&&!1==!a.props.allowEmptyRows)throw new Error("Can't build DataTable from rows and columns: rows array in props is empty");if(null===a.props.data&&a.props.columns&&0===a.props.columns.length)throw new Error("Can't build DataTable from rows and columns: columns array in props is empty");if(null!==a.props.data)try{return a.wrapper.setDataTable(a.props.data),a.wrapper.getDataTable()}catch(t){throw new Error("Failed to set DataTable from data props ! ",t)}var s=new window.google.visualization.DataTable;if(a.props.columns.forEach(function(t){s.addColumn(t)}),s.addRows(a.props.rows),a.props.numberFormat){var l=a.props.numberFormat;a.applyNumberFormat(l.column,l.options)}if(a.props.dateFormat){var p=a.props.dateFormat,d=p.options;p.columns.forEach(function(t){a.applyDateFormat(t,d)})}return a.props.formatters.forEach(function(t){var o=t.type,e=t.column,r=t.options;switch(o){case"NumberFormat":a.applyNumberFormat(e,r);break;case"DateFormat":a.applyDateFormat(e,r);break;default:console.log("Unkown formatter type: "+o)}}),s},this.updateDataTable=function(){return window.google.visualization.errors.removeAll(document.getElementById(a.wrapper.getContainerId())),a.dataTable.removeRows(0,a.dataTable.getNumberOfRows()),a.dataTable.removeColumns(0,a.dataTable.getNumberOfColumns()),a.dataTable=a.buildDataTableFromProps(),a.dataTable},this.drawChart=function(){if(!a.isUnmounted){if(a.wrapper){if(a.updateDataTable(),a.wrapper.setDataTable(a.dataTable),a.wrapper.setOptions(a.props.options),a.wrapper.getChartType()!==a.props.chartType){window.google.visualization.events.removeAllListeners(a.wrapper),a.wrapper.setChartType(a.props.chartType);var t=a;window.google.visualization.events.addOneTimeListener(a.wrapper,"ready",function(){t.chart=t.wrapper.getChart(),t.listenToChartEvents.call(t)})}}else a.wrapper=new window.google.visualization.ChartWrapper({chartType:a.props.chartType,options:a.props.options,containerId:a.state.graphID}),a.dataTable=a.buildDataTableFromProps(),a.wrapper.setDataTable(a.dataTable),window.google.visualization.events.addOneTimeListener(a.wrapper,"ready",function(){a.chart=a.wrapper.getChart(),a.listenToChartEvents(),a.addChartActions()});a.wrapper.draw()}},this.addChartActions=function(){null!==a.props.chartActions&&a.props.chartActions.forEach(function(t){a.chart.setAction({id:t.id,text:t.text,action:t.action.bind(a,a.chart)})})},this.listenToChartEvents=function(){a.props.legend_toggle&&window.google.visualization.events.addListener(a.wrapper,"select",a.onSelectToggle),a.props.chartEvents.forEach(function(t){var o;"ready"===t.eventName?t.callback(a):(o=t,window.google.visualization.events.addListener(a.chart,o.eventName,function(t){o.callback(a,t)}))})},this.buildColumnFromSourceData=function(t){return{label:a.dataTable.getColumnLabel(t),type:a.dataTable.getColumnType(t),sourceColumn:t,role:a.dataTable.getColumnRole(t)}},this.buildEmptyColumnFromSourceData=function(t){return{label:a.dataTable.getColumnLabel(t),type:a.dataTable.getColumnType(t),calc:function(){return null},role:a.dataTable.getColumnRole(t)}},this.addEmptyColumnTo=function(t,o){var e=a.buildEmptyColumnFromSourceData(o);t.push(e)},this.hideColumn=function(t,o){a.isHidden(o)||(a.hidden_columns[o]={color:a.getColumnColor(o-1)}),t.push("#CCCCCC")},this.addSourceColumnTo=function(t,o){var e=a.buildColumnFromSourceData(o);t.push(e)},this.isHidden=function(t){return void 0!==a.hidden_columns[t]},this.restoreColorTo=function(t,o){var e;a.isHidden(o)?(e=a.hidden_columns[o].color,delete a.hidden_columns[o]):e=a.getColumnColor(o-1),0!==o&&t.push(e)},this.debounce=function(t,o){var e;return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];var n=this;clearTimeout(e),e=setTimeout(function(){return t.apply(n,r)},o)}},this.togglePoints=function(t){for(var o=new window.google.visualization.DataView(a.wrapper.getDataTable()),e=o.getNumberOfColumns(),r=[],n=[],i=0;i<e;i+=1)0===i?a.addSourceColumnTo(n,i):i===t?a.isHidden(i)?(a.addSourceColumnTo(n,i),a.restoreColorTo(r,i)):(a.addEmptyColumnTo(n,i),a.hideColumn(r,i)):a.isHidden(i)?(a.addEmptyColumnTo(n,i),a.hideColumn(r,i)):(a.addSourceColumnTo(n,i),a.restoreColorTo(r,i));o.setColumns(n),a.props.options.colors=r,a.chart.draw(o,a.props.options)},this.state={graphID:t.graph_id||i()}}return o&&(n.__proto__=o),(n.prototype=Object.create(o&&o.prototype)).constructor=n,n.prototype.componentDidMount=function(){var t=this;"undefined"!=typeof window&&(this.props.loadCharts?a.init(this.props.chartPackages,this.props.chartVersion,this.props.chartLanguage,this.props.mapsApiKey).then(function(){t.drawChart(),t.onResize=t.debounce(t.onResize,200),window.addEventListener("resize",t.onResize)}):this.drawChart())},n.prototype.componentDidUpdate=function(){var t=this;this.props.loadCharts?a.isLoading?a.loadScript&&a.loadScript.then(function(){t.drawChart()}):a.isLoaded&&this.drawChart():this.drawChart()},n.prototype.componentWillUnmount=function(){this.isUnmounted=!0,a.destroy();try{window&&(window.google&&window.google.visualization&&window.google.visualization.events.removeAllListeners(this.wrapper),window.removeEventListener("resize",this.onResize))}catch(t){return}},n.prototype.render=function(){return t.createElement("div",{id:this.state.graphID,style:{height:this.props.height||this.props.options.height,width:this.props.width||this.props.options.width}},this.props.loader?this.props.loader:"Rendering Chart...")},n}(t.Component);return s.defaultProps={chartType:"LineChart",rows:[],columns:[],options:{chart:{title:"Chart Title",subtitle:"Subtitle"},hAxis:{title:"X Label"},vAxis:{title:"Y Label"},width:"100%",height:"100%"},width:"400px",height:"300px",chartEvents:[],chartActions:null,data:null,legend_toggle:!1,allowEmptyRows:!1,loadCharts:!0,loader:t.createElement("div",null,"Rendering Chart"),chartPackages:["corechart"],chartVersion:"current",chartLanguage:"en",numberFormat:null,dateFormat:null,formatters:[],diffdata:null},{Chart:s}});
//# sourceMappingURL=index.umd.js.map
